"0",""
"0","files_countries <- data.frame(dir=list.files(path = ""sources/CRTs/""))"
"0","files_countries <- files_countries %>% "
"0","  mutate(country = str_extract(dir, ""^.{3}"")) %>% "
"0","  mutate(year_submission = str_extract(dir, ""\\d{4}""))"
"0","files_crts = data.frame(country=NA,year_submission=NA,dir=NA,files=NA,file_year=NA)"
"0",""
"0","for (i in 2:length(files_countries$dir)) {"
"0","  "
"0","  files <- data.frame(files=list.files(path = paste0(""sources/CRTs/"",files_countries$dir[i])))"
"0","  files <- files %>% "
"0","    mutate(all_years = map(files, ~ str_extract_all(.x, ""\\b\\d{4}\\b"")[[1]])) %>% "
"0","    mutate(file_year = map_chr(all_years, ~ .x[2])) %>% "
"0","    select(-all_years) %>% "
"0","    filter(!is.na(file_year)) %>% "
"0","    mutate(dir=files_countries$dir[i]) %>% "
"0","    mutate(country=files_countries$country[i]) %>% "
"0","    mutate(year_submission=files_countries$year_submission[i])"
"0","    "
"0","  files_crts <- rbind(files_crts,files)"
"0","  "
"0","  rm(files)"
"0","}"
"0",""
"0","rm(files_countries)"
"0","files_crts <- files_crts %>% filter(!is.na(country))"
